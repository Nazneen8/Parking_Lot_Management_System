<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Payment</title>
  <link rel="stylesheet" href="CSS/styles.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" 
  integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" 
  crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<payment-body>

  <!-- Payment Selection Page -->
  <div class="payment-container" id="plan-page">
    <header>
      <a href="studentDashboard.html">
      <i class="fa-solid fa-arrow-left"></i>
      </a>
      <h1>PAYMENT</h1>
    
      <a href="studentDashboard.html"><i class="fa-solid fa-house"></i></a>
    </header>

    <p class="subtitle">Make a payment to gain access to the parking lot.<br>
    Choose your desired plan below:</p>

    <!--<div class="plans">
      <div class="plan">
        <h3>Month-to-month</h3>
        <p>R200 per month</p>
        <a href="paymentDetails.html">
        <button class="pay-btn">Pay</button>
      </a>
      </div>

      <div class="plan">
        <h3>Yearly</h3>
        <p>R2000 per year</p>
        <a href="paymentDetails.html">
        <button class="pay-btn">Pay</button>
        </a>
      </div>

      <div class="plan">
        <h3>Daily</h3>
        <p>R20 per day</p>
        <a href="paymentDetails.html">
        <button class="pay-btn">Pay</button>
        </a>
      </div>
    </div>-->

    <div class="plans">
      <div class="plan">
        <h3>Month-to-month</h3>
        <p>R200 per month</p>
        <button class="pay-btn" onclick="selectPlan('Month-to-month', 'R200 per month')">Pay</button>
      </div>

      <div class="plan">
        <h3>Semester</h3>
        <p>R700 per semester</p>
        <button class="pay-btn" onclick="selectPlan('Semester', 'R700 per semester')">Pay</button>
      </div>

      <div class="plan">
        <h3>Yearly</h3>
        <p>R2000 per year</p>
        <button class="pay-btn" onclick="selectPlan('Yearly', 'R2000 per year')">Pay</button>
      </div>

      <div class="plan">
        <h3>Daily</h3>
        <p>R20 per day</p>
        <button class="pay-btn" onclick="selectPlan('Daily', 'R20 per day')">Pay</button>
      </div>
    </div>
    

     <a href="studentDashboard.html">
  <button class="cancel-btn" onclick="cancelReservation()">Cancel Reservation</button>
  </a>
  <br>

     <img src="images/RC_logo.png" alt="Rosebank College Logo" class="college-logo">
  </div>

 

  <script>
    // Store the chosen plan and navigate to verification page
    function selectPlan(name, price) {
      localStorage.setItem('selectedPlan', JSON.stringify({ name, price }));
      window.location.href = 'paymentDetails.html';
    }

    // Implement the cancelReservation function
function cancelReservation() {
    const lastParkingSlot = localStorage.getItem('lastParkingSlot');
    if (lastParkingSlot) {
        // Retrieve the parking status, change it to grey
        const parkingStatus = JSON.parse(localStorage.getItem("studentParkingStatus")) || {};
        parkingStatus[lastParkingSlot] = "grey";

        // Save the updated parking status back to localStorage
        localStorage.setItem("studentParkingStatus", JSON.stringify(parkingStatus));

        // Optionally redirect to the dashboard or refresh the page
        window.location.href = 'studentDashboard.html'; // Or refresh the current page
    }
}
  </script>
  </div>

</payment-body>
</html>